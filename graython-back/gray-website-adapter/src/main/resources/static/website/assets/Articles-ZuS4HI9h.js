import{j as re,g as de,r as ue,m as pe,s as _e}from"./element-plus-D_LIGSL8.js";import{b as ve}from"./vue-router-DaOdIdNP.js";import{L as D,c as G,_ as Y,u as me,i as ye,d as fe,e as he,f as be}from"./index-C11apwXZ.js";import{b as ge,ax as ke,r,d as X,ah as L,o as f,c as g,L as d,P as k,T,U as v,u as s,G as we,a as t,S as C,V as N,M,a7 as q,n as Z,at as Ee,au as Se,J,Q as Te}from"./@vue-BV9Q_yhH.js";import{q as xe,p as Ce,z as Ae,A as Le}from"./@element-plus-DgtNr1CL.js";/* empty css              */import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Dc0JWrkO.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";/* empty css                             */import"./pinia-CWZPuNdE.js";import"./axios-Cm0UX6qg.js";import"./vue-pdf-embed-BcRweBTn.js";const Be=(l,o)=>{let n=!1;ge(()=>{n||l()}),ke(()=>{n&&o(),n=!0})},V="BLOSSOM-ARTICLE-FONT-SZIE",A=r(D.get(V)||.9),ze=()=>{A.value+=.1,D.set(V,A.value)},Ie=()=>{A.value-=.1,D.set(V,A.value)},Re=()=>A.value,Q=()=>A.value+"rem",We=l=>{let o=l.querySelectorAll("h1, h2, h3, h4, h5, h6"),n=[];for(let m=0;m<o.length;m++){let y=o[m],a=1,i=y.innerText,w=y.id;switch(y.localName){case"h1":a=1;break;case"h2":a=2;break;case"h3":a=3;break;case"h4":a=4;break;case"h5":a=5;break;case"h6":a=6;break}let c={content:i,clazz:"toc-"+a,id:w};n.push(c)}return n},Oe=l=>{let o=document.getElementById(l);o==null||o.scrollIntoView(!0)},Pe=l=>G(l.icon)&&(l.icon.startsWith("http")||l.icon.startsWith("https")),Ne=l=>G(l.icon),Me=l=>{let o=[];return l.t.forEach(n=>{n.toLocaleLowerCase()==="subject"?o.unshift({content:"专题",bgColor:"#565656",icon:"bl-a-lowerrightpage-line"}):n.toLocaleLowerCase()==="toc"?o.push({content:"目录",bgColor:"#939393"}):o.push({content:n})}),o},De=(l,o,n,m,y)=>{if(m==="copyPreCode"){let a=document.getElementById(y);if(a){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(a.innerText);{let i=document.createElement("textarea");return i.value=a.innerText,i.style.position="absolute",i.style.opacity="0",i.style.left="-999999px",i.style.top="-999999px",document.body.appendChild(i),i.focus(),i.select(),new Promise((w,c)=>{document.execCommand("copy")?w():c(),i.remove()})}}}},Ge={class:"detail"},Ve=X({__name:"ArticleSetting",setup(l){return(o,n)=>{const m=L("bl-tag"),y=re,a=L("bl-row");return f(),g("div",Ge,[d(a,null,{default:k(()=>[T(" 文章字体大小： "),d(m,{style:{"margin-right":"15px"}},{default:k(()=>[T(v(s(Re)().toFixed(1)),1)]),_:1}),d(y,{size:"small",icon:s(xe),onClick:n[0]||(n[0]=i=>s(ze)())},null,8,["icon"]),d(y,{size:"small",icon:s(Ce),onClick:n[1]||(n[1]=i=>s(Ie)())},null,8,["icon"])]),_:1})])}}}),Ke=Y(Ve,[["__scopeId","data-v-e099c7ab"]]),h=l=>(Ee("data-v-9700051d"),l=l(),Se(),l),$e={class:"articles-root"},Fe={class:"headmenu"},Ue=h(()=>t("div",{class:"iconbl bl-model-line"},null,-1)),je=h(()=>t("div",{style:{"font-size":"0.8rem"}},"文章列表",-1)),He=h(()=>t("div",{style:{"font-size":"0.8rem"}},"目录",-1)),qe=h(()=>t("div",{class:"iconbl bl-list-ordered"},null,-1)),Ze={class:"main"},Je={class:"doc-name"},Qe=["src"],Ye={key:1,class:"icon menu-icon","aria-hidden":"true"},Xe=["xlink:href"],et={key:0,class:"article-name"},tt=["innerHTML"],ot={class:"viewer-toc"},st={key:0,class:"doc-info"},lt={class:"doc-name",style:{"font-size":"15px"}},nt={class:"doc-subtitle"},at=h(()=>t("span",{class:"iconbl bl-pen-line"},null,-1)),it=h(()=>t("span",{class:"iconbl bl-read-line"},null,-1)),ct=h(()=>t("span",{class:"iconbl bl-like-line"},null,-1)),rt={class:"doc-subtitle"},dt=h(()=>t("span",{class:"iconbl bl-a-clock3-line"},null,-1)),ut={class:"doc-subtitle"},pt=h(()=>t("span",{class:"iconbl bl-a-clock3-line"},null,-1)),_t=h(()=>t("div",{class:"toc-title"},"目录",-1)),vt={class:"toc-content"},mt=["onClick"],yt=X({__name:"Articles",setup(l){const o=me();Be(()=>{window.onHtmlEventDispatch=De,m(),window.addEventListener("resize",W),H()},()=>{m(),window.addEventListener("resize",W),H()}),we(()=>{window.removeEventListener("resize",W)});const n=r(),m=()=>{let e=y.query.articleId;ee(()=>{Z(()=>{n.value.setCurrentKey(i.value)})}),ye(e)&&(i.value=e,F({ty:3,i:e}))},y=ve(),a=r(!0),i=r(""),w=r([]),c=r({id:0,pid:0,name:"",tags:[],sort:0,starStatus:0,openStatus:0,type:3,html:`<div style="color:#E3E3E3;width:100%;height:300px;display:flex;justify-content: center;
    align-items: center;font-size:25px;">请在左侧菜单选择文章</div>`}),K=r([]),$=r([]),B=r(),ee=e=>{a.value=!0,w.value=[],$.value=[];const u=p=>{w.value=p.data,w.value.forEach(O=>{$.value.push(O.i.toString())}),e&&e()};fe().then(p=>u(p)).finally(()=>a.value=!1)},F=async e=>{e.ty==3&&(await te(e.i),window.history.replaceState("","","#/articles?articleId="+e.i),Z(()=>{B.value.scrollTo({top:0}),oe(B.value)}))},te=async e=>{if(e==="-999"){c.value.html=`<div style="color:#C6C6C6;font-weight: 300;width:100%;height:300px;padding:150px 20px;font-size:25px;text-align:center">
      该博客所配置的 USER_ID 为<br/><span style="color:#e3a300; border-bottom: 5px solid #e3a300;border-radius:5px">${window.blconfig.SYS.USER_ID}</span>
      </div>`;return}const u=p=>{be(p.data)||(c.value=p.data)};await he({id:e,showToc:!1,showMarkdown:!1,showHtml:!0}).then(p=>u(p))},oe=async e=>{K.value=We(e)},z=r(!1),se=()=>{z.value=!0},x=r({display:"none"}),I=r(!1),E=r({display:"none",opacity:0}),R=r(!1),S=r({display:"none",opacity:0}),U=e=>{I.value=e,e&&(x.value={display:"block"},E.value={display:"block",opacity:0},setTimeout(()=>{E.value={display:"block",opacity:1}},1)),e||(E.value={display:"block",opacity:0},setTimeout(()=>{E.value={display:"none",opacity:0}},300))},j=e=>{R.value=e,e&&(x.value={display:"block"},S.value={display:"block",opacity:0},setTimeout(()=>{S.value={display:"block",opacity:1}},1)),e||(S.value={display:"block",opacity:0},setTimeout(()=>{S.value={display:"none",opacity:0}},300))},H=()=>{let e=document.body.clientWidth;e>1100&&(E.value={display:"block",opacity:1}),e>1100&&(x.value={display:"none"},S.value={display:"block",opacity:1})},le=()=>{U(!1),j(!1),x.value={display:"none"}},W=()=>{let e=document.body.clientWidth;e<1100&&(I.value=!1,E.value={display:"none",opacity:0}),e>1100&&(x.value={display:"none"},E.value={display:"block",opacity:1}),e<1100&&(R.value=!1,S.value={display:"none",opacity:0}),e>1100&&(x.value={display:"none"},S.value={display:"block",opacity:1})};return(e,u)=>{const p=L("bl-row"),O=L("bl-tag"),ne=de,ae=ue,ie=pe,ce=_e;return f(),g(M,null,[t("div",$e,[t("div",{class:"mask",style:C(x.value),onClick:le},null,4),t("div",Fe,[d(p,{onClick:u[0]||(u[0]=b=>U(!I.value))},{default:k(()=>[Ue,je]),_:1}),d(p,{just:"flex-end",onClick:u[1]||(u[1]=b=>j(!R.value))},{default:k(()=>[He,qe]),_:1})]),t("div",Ze,[t("div",{class:"doc-tree-container",style:C(E.value)},[d(ne,{ref_key:"DocTreeRef",ref:n,class:"doc-tree",data:w.value,"highlight-current":!0,indent:14,icon:s(Ae),"node-key":"i",onNodeClick:F},{default:k(({_node:b,data:_})=>[t("div",{class:"menu-item-wrapper",style:C({marginTop:_.p==="0"?"5px":"1px",marginBottom:_.p==="0"?"5px":"1px"})},[t("div",{class:J([_.t.includes("subject")&&s(o).userParams.WEB_BLOG_SUBJECT_TITLE==="1"?"subject-title":"doc-title"])},[t("div",Je,[s(Pe)(_)?(f(),g("img",{key:0,class:"menu-icon-img",src:_.icon},null,8,Qe)):s(Ne)(_)?(f(),g("svg",Ye,[t("use",{"xlink:href":"#"+_.icon},null,8,Xe)])):N("",!0),t("div",{class:"name-wrapper",style:C({maxWidth:s(G)(_.icon)?"calc(100% - 25px)":"100%"})},v(_.n),5),(f(!0),g(M,null,q(s(Me)(_),P=>(f(),Te(O,{"bg-color":P.bgColor,icon:P.icon},{default:k(()=>[T(v(P.content),1)]),_:2},1032,["bg-color","icon"]))),256))])],2)],4)]),_:1},8,["data","icon"])],4),t("div",{class:"doc-content-container",ref_key:"PreviewRef",ref:B,style:C({fontSize:s(Q)()})},[s(o).userParams.WEB_BLOG_SHOW_ARTICLE_NAME==="1"?(f(),g("div",et,v(c.value.name),1)):N("",!0),d(ae,{font:{color:s(o).userParams.WEB_BLOG_WATERMARK_COLOR,fontSize:s(o).userParams.WEB_BLOG_WATERMARK_FONTSIZE,textBaseline:"hanging"},content:c.value.id>0&&s(o).userParams.WEB_BLOG_WATERMARK_ENABLED==="1"?s(o).userParams.WEB_BLOG_WATERMARK_CONTENT:"",gap:[s(o).userParams.WEB_BLOG_WATERMARK_GAP,s(o).userParams.WEB_BLOG_WATERMARK_GAP]},{default:k(()=>[t("div",{class:"bl-preview",style:C({fontSize:s(Q)()}),innerHTML:c.value.html},null,12,tt)]),_:1},8,["font","content","gap"])],4),t("div",{class:"toc-container",style:C(S.value)},[t("div",ot,[c.value.id!=0?(f(),g("div",st,[t("div",lt,v(c.value.name),1),t("div",nt,[at,T(" "+v(c.value.words)+" 字 | ",1),it,T(" "+v(c.value.uv)+" | ",1),ct,T(" "+v(c.value.likes),1)]),t("div",rt,[dt,T(" 公开 "+v(c.value.openTime),1)]),t("div",ut,[pt,T(" 修改 "+v(c.value.syncTime),1)])])):N("",!0),_t,t("div",vt,[(f(!0),g(M,null,q(K.value,b=>(f(),g("div",{key:b.id,class:J(["toc-item","link",b.clazz]),onClick:_=>s(Oe)(b.id)},v(b.content),11,mt))),128))])])],4),t("div",{class:"module-workbench",onClick:se},[d(ie,{style:{"font-size":"2rem"},color:"#7b7b7ba9"},{default:k(()=>[d(s(Le))]),_:1})])])]),d(ce,{modelValue:z.value,"onUpdate:modelValue":u[2]||(u[2]=b=>z.value=b),class:"center-drawer",direction:"btt","close-on-click-modal":!0,"with-header":!0,"destroy-on-close":!0,size:"7rem"},{default:k(()=>[d(Ke,{style:{"background-color":"var(--gw-bg-basic)"}})]),_:1},8,["modelValue"])],64)}}}),Rt=Y(yt,[["__scopeId","data-v-9700051d"]]);export{Rt as default};
