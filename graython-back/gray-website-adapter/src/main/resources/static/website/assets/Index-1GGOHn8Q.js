import{_ as D,g as le,r as ce,t as xe}from"./index-DjMqVLpm.js";import"./request_website-CrBmHNxu.js";import{t as we,_ as Me}from"./Header.vue_vue_type_style_index_0_lang-CNqSkvHc.js";import{b as H,E as re,c as Re}from"./element-plus-8efUW2IF.js";import{e as Te}from"./@vueuse-DVUPgnhb.js";import{e as _}from"./mitt-CJohXFwE.js";import{d as T,o as c,c as v,L as k,P as R,u as f,V as z,r as o,Q as I,a as e,S as Ce,$ as Le,I as Se,b as K,at as de,au as me,h as Ie,G as $e,Z as ue,_ as fe,U as A,M as Ee,g as Pe,w as Be,ah as Ae,R as De,av as He}from"./@vue-BV9Q_yhH.js";import{s as M}from"./screenfull-DmVOzVZz.js";import"./pinia-CWZPuNdE.js";import"./axios-Cm0UX6qg.js";import"./vue-router-DaOdIdNP.js";import"./vue-pdf-embed-BcRweBTn.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-Dc0JWrkO.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./auth-zKb7VtRn.js";import"./mitt-DJ65BbbF.js";const ze={key:0,class:"iconfont icon-sun"},Ne={key:1,class:"iconfont icon-moon"},Xe=T({__name:"index",setup(d){let m=Te();const r=()=>{m.value=!m.value,_.emit("dayNightChanged",m.value)};return(i,p)=>{const l=H;return c(),v("div",{style:{"margin-bottom":"1rem"},onClick:r},[k(l,{effect:"light",content:"日夜切换",placement:"left"},{default:R(()=>[f(m)?(c(),v("span",ze)):(c(),v("span",Ne))]),_:1})])}}}),je={key:0,class:"iconfont icon-a-ScreenShrink"},Fe={key:1,class:"iconfont icon-a-ScreenExpand"},Ue=T({__name:"index",setup(d){function m(){M.isEnabled?M.isFullscreen?(re.success("退出网页全屏"),M.exit()):(re.success("进入网页全屏"),M.toggle()):Re.alert("浏览器不支持全屏","提示",{confirmButtonText:"确定",type:"warning"})}return(r,i)=>{const p=H;return f(M).isEnabled?(c(),v("div",{key:0,style:{"margin-bottom":"1rem"},onClick:i[0]||(i[0]=l=>m())},[k(p,{effect:"light",content:"全屏切换",placement:"left"},{default:R(()=>[f(M).isFullscreen?(c(),v("span",je)):(c(),v("span",Fe))]),_:1})])):z("",!0)}}}),Ve=D(Ue,[["__scopeId","data-v-267e6f9e"]]),We=T({__name:"index",props:{fontSize:{type:String,default:"3rem"}},setup(d){const m=o(0);window.addEventListener("scroll",we(()=>{m.value=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0},100));function r(){window.scrollTo({top:0,behavior:"smooth"})}return(i,p)=>{const l=H;return c(),I(Le,{name:"el-zoom-in-bottom"},{default:R(()=>[f(m)>=800?(c(),v("div",{key:0,style:{"margin-top":"1rem"},onClick:r},[k(l,{effect:"light",content:"回到顶部",placement:"left"},{default:R(()=>[e("span",{style:Ce({fontSize:d.fontSize}),class:"iconfont icon-caps-unlock-filling"},null,4)]),_:1})])):z("",!0)]),_:1})}}}),Ye=d=>(de("data-v-3a2f21cc"),d=d(),me(),d),qe={class:"toolbox_div"},Ge=Ye(()=>e("span",{id:"menu-icon",class:"iconfont icon-menu"},null,-1)),Ke={class:"mb-4"},Oe=T({__name:"index",props:{toTop:{type:Boolean,default:!1}},emits:["ReadingMode"],setup(d,{emit:m}){const r=o(),i=d,{toTop:p}=Se(i),l=o(!1),y=()=>{h(),l.value?(l.value=!1,r.value.classList.add("hide")):(l.value=!0,r.value.classList.remove("hide"))},h=()=>{const s=document.getElementById("menu-icon");s==null||s.classList.add("active"),setTimeout(function(){s==null||s.classList.remove("active")},1e3)};return K(()=>{console.log(p.value)}),(s,C)=>{const x=H;return c(),v("div",qe,[e("div",{ref_key:"moreRef",ref:r,class:"hide"},[k(Xe),k(Ve)],512),e("div",{class:"rotate-box",onClick:y},[k(x,{effect:"light",content:"更多功能",placement:"left"},{default:R(()=>[Ge]),_:1})]),e("div",Ke,[f(p)?(c(),I(We,{key:0})):z("",!0)])])}}}),Qe=D(Oe,[["__scopeId","data-v-3a2f21cc"]]),pe=d=>(de("data-v-157b629b"),d=d(),me(),d),Ze={class:"music-player-top"},Je={class:"music-player"},et={class:"top-bar"},tt=pe(()=>e("span",{class:"iconfont icon-24gl-volumeMiddle"},null,-1)),st=["src"],nt={class:"lyric-wrapper"},ot={class:"info-right"},it={class:"music-name"},at={class:"playback-setting"},lt=pe(()=>e("span",{class:"duration-bar play-duration"},null,-1)),ct={class:"music-disc"},rt=["src"],ut={class:"info-box"},ft={class:"info"},dt={class:"text-sm whitespace-nowrap"},mt={class:"text-sm whitespace-nowrap"},pt=T({__name:"index",setup(d,{expose:m}){const r=o(!1),i=o({id:"",name:"",src:"",img:"./favicon.png",artist:"",lyrics:""}),p=o([]),l=o(!1),y=o(),h=o(!1),s=o(),C=o(),x=o(),$=o(),L=o(),N=o(),X=o(),j=o(),F=o(),O=o(),U=o(),ve=o(),V=o(),W=o(!0);Ie(()=>"./favicon.png");let Y,Q,b=0;function _e(){Y&&clearInterval(Y),Q=s.value.duration,Y=setInterval(function(){Z()},1e3)}function Z(){if(l.value&&F.value){F.value.style.width=s.value.currentTime/s.value.duration*100+"%";let t=s.value.duration-s.value.currentTime,n=parseInt(String(t/60)),a=parseInt(String(t%60)),u=`${n<10?"0"+n:n}:${a<10?"0"+a:a}`;O.value.innerHTML=u,J()}}let S=[],E=[];function J(){if(h.value){let t=q(S,Math.floor(s.value.currentTime));t<0&&(t=0),L.value.style.top=t*-21+150+"px",[...L.value.children].forEach(n=>{n.style.color="var(--gw-bg-font)"}),L.value.children[t].style.color="aqua"}}function ee(){let t="";S=[],E=[];let n=i==null?void 0:i.value.lyrics;if(!n)t+="<li>未发现歌词</li>",S=[0];else try{n.split(`
`).forEach(u=>{const g=u.split("::");S.push(g[0]),E.push(g[1]),t+=`<li>${E[E.length-1]}</li>`})}catch{t+="<li>歌词格式不正确</li>",S=[0]}l.value&&(L.value.innerHTML=t)}function P(t){if(p.value.length>0){let n=p.value[t];i.value=n,s.value.src=n.src,_.emit("musicChanged",i.value),W.value=!0,l.value&&($.value.innerHTML=n.artist,x.value.innerHTML=n.title,h.value&&ee())}}function w(){s.value.play(),r.value=!0}function te(){s.value.pause(),r.value=!1}function se(){b==0?b=p.value.length-1:b--,P(b),w()}function B(){b==p.value.length-1?b=0:b++,P(b),w()}function q(t,n,a=0,u=t.length-1){if(a>u)return a-1;const g=Math.floor((a+u)/2);return t[g]===n?g:t[g]>n?q(t,n,a,g-1):q(t,n,g+1,u)}function ye(){W.value&&(ee(),W.value=!1),h.value?(N.value.style.display="flex",j.value.style.display="none",X.value.style.width="40%",h.value=!1):(N.value.style.display="block",j.value.style.display="block",X.value.style.width="100%",h.value=!0)}function ge(t){s.value.currentTime=t.offsetX/t.target.offsetWidth*Q,Z()}function he(t){s.value.volume=t.offsetX/t.target.offsetWidth,U.value.style.width=t.offsetX/t.target.offsetWidth*100+"%"}function ke(){let t=V.value.offsetWidth;document.onmousemove=function(n){let u=(n||event).clientX-V.value.getBoundingClientRect().left;u>t?u=t:u==0&&(u=0),U.value.style.width=u/t*100+"%",s.value.volume=u/t},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}const G=o(!1);let ne=0,oe=0;const be=t=>{if(G.value=!0,y.value){let n=y.value.getBoundingClientRect();ne=n.width,oe=n.height}document.addEventListener("mousemove",ie),document.addEventListener("mouseup",ae)},ie=t=>{G.value&&y.value&&(y.value.style.left=t.clientX+ne/2-18+"px",y.value.style.top=t.clientY+oe/2-18.75+"px")},ae=()=>{G.value=!1,document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",ae)};return K(()=>{const t=Pe();t&&(window._MusicPlayer=t.proxy),P(0),_.on("playMusic",()=>{w()}),_.on("previousMusic",()=>{se()}),_.on("nextMusic",()=>{B()}),_.on("setMusic",n=>{P(n)}),_.on("playSelectedMusic",n=>{p.value.unshift(...n.map(a=>({id:a.id,name:a.title,src:le()+a.previewUrl.replace("//","/"),img:a.artistThumbnail?le()+a.artistThumbnail:"./favicon.png",artist:a.artist,lyrics:a.lyrics})))})}),$e(()=>{delete window._MusicPlayer,_.off("playMusic"),_.off("previousMusic"),_.off("nextMusic"),_.off("setMusic"),_.off("playSelectedMusic")}),m({playMusic:w}),(t,n)=>{var a,u;return c(),v(Ee,null,[ue(e("div",{ref_key:"musicPlayerRef",ref:y,class:"music-player-wrapper"},[e("div",Ze,[e("span",{onMousedown:be,class:"iconfont icon-hand"},null,32),e("span",{onClick:n[0]||(n[0]=g=>l.value=!1),class:"iconfont icon--"})]),e("div",Je,[e("div",et,[tt,e("div",{ref_key:"soundProgressBarRef",ref:V,class:"progress-bar sound-progress-bar"},[e("span",{onClick:he,class:"duration-bar sound-duration"}),e("span",{ref_key:"soundProgressRef",ref:U,class:"progress sound-progress"},[e("span",{onMousedown:ke,ref_key:"roundRef",ref:ve,class:"round"},null,544)],512)],512),e("span",{class:"iconfont icon-geciweidianji",onClick:ye})]),e("div",{ref_key:"musicInfoRef",ref:N,class:"music-info"},[e("div",{ref_key:"infoLeftRef",ref:X,class:"info-left"},[e("img",{ref_key:"musicImgRef",ref:C,class:"music-img",alt:"",src:f(i).img,onerror:"this.src='./favicon.png';"},null,8,st),e("div",{ref_key:"lyricMaskRef",ref:j,class:"lyric-mask"},[e("div",nt,[e("ul",{ref_key:"lyricContentRef",ref:L,id:"lyc-content",style:{top:"100px"}},null,512)])],512)],512),e("div",ot,[e("div",it,[e("span",{ref_key:"musicNameRef",ref:x,class:"name"},A(f(i).name||"放首歌听听吧"),513),e("span",{ref_key:"musicAuthorRef",ref:$,class:"musician"},A(f(i).artist||""),513)]),e("div",at,[e("span",{onClick:se,class:"iconfont icon-next previous"}),f(r)?(c(),v("span",{key:0,onClick:te,class:"iconfont icon-zanting1"})):(c(),v("span",{key:1,onClick:w,class:"iconfont icon-bofang"})),e("span",{onClick:B,class:"iconfont icon-next next"})])])],512),e("div",{onClick:ge,class:"progress-bar player-progress-bar"},[lt,e("span",{ref_key:"playerProgressRef",ref:F,class:"progress player-progress"},null,512),e("span",{ref_key:"musicTimeRef",ref:O,class:"time"},"00:00",512)])])],512),[[fe,f(l)]]),ue(e("div",ct,[e("img",{onClick:n[1]||(n[1]=g=>l.value=!f(l)),class:"music-img",src:f(i).img,alt:"musician logo",onerror:"this.src='./favicon.png';"},null,8,rt),e("div",ut,[e("div",ft,[e("div",dt,A(((a=f(i))==null?void 0:a.name)||"放首歌来听吧"),1),e("div",mt,A((u=f(i))==null?void 0:u.artist),1)]),e("span",{onClick:B,style:{"margin-right":"1rem"},class:"iconfont icon-next"}),f(r)?(c(),v("span",{key:0,onClick:te,class:"iconfont icon-zanting1"})):(c(),v("span",{key:1,onClick:w,class:"iconfont icon-bofang"}))])],512),[[fe,!f(l)]]),e("audio",{src:"",ref_key:"audioRef",ref:s,onTimeupdate:J,onCanplay:_e,onEnded:B},null,544)],64)}}}),vt=D(pt,[["__scopeId","data-v-157b629b"]]),_t={id:"index-layout",class:"layout-root-container"},yt=T({__name:"Index",setup(d){const m=o([{icon:"icon-wangzhanshouye",name:"Home",title:"首页"},{icon:"icon-Bloggericon",name:"Articles",title:"博文"},{icon:"icon-wangzhantubiao",name:"Links",title:"导航"},{icon:"icon-heji",name:"Resource",title:"资源"},{icon:"icon-dianying",name:"Movie",title:"影院"},{icon:"icon-18erji-2",name:"Music",title:"音乐"}]),r=o("Home"),i=o(["Home"]),p=o("Home");K(async()=>{}),Be(()=>ce.currentRoute.value,s=>{s.name&&(p.value=s.name,r.value=s.name.toString()),s.meta.keepAlive&&i.value.indexOf(s.name)===-1&&i.value.push(s.name)},{immediate:!0});const l=["Login"],y=()=>{const s=ce.currentRoute.value;return!(s!=null&&s.name&&l.find(C=>C===s.name))},h=s=>{r.value=s,xe(s)};return(s,C)=>{const x=Ae("router-view");return c(),v("div",_t,[y()?(c(),I(Me,{key:0,tabs:m.value,selectedTab:r.value,"onUpdate:selectedTab":h},null,8,["tabs","selectedTab"])):z("",!0),k(x,null,{default:R(({Component:$})=>[(c(),I(He,{include:[i.value]},[(c(),I(De($)))],1032,["include"]))]),_:1}),k(Qe,{toTop:!0}),k(vt)])}}}),zt=D(yt,[["__scopeId","data-v-4326138d"]]);export{zt as default};
