import{d as $,I as A,r as a,Z as O,_ as U,u as t,o as D,c as B,a as s,S as Y,U as F,L as I,H as Z,ao as C}from"./@vue-l7diRTBz.js";import{F as X}from"./file-saver-CJAWeVrG.js";import{_ as L}from"./index-BWEZ84Dh.js";import{l as j}from"./vue-pdf-embed-lua1maMu.js";const G=["src","alt"],H=.1,J=.5,K=3,M=$({__name:"ImageViewer",props:{src:{},name:{},visible:{}},emits:["close"],setup(o,{emit:n}){const f=o,{src:r,name:_,visible:w}=A(f),v=n;function u(){v("close")}const g=()=>{r.value&&fetch(r.value).then(e=>e.blob()).then(e=>{X.saveAs(e,_.value||"image.png")}).catch(e=>console.error("下载图片异常:",e))},m=a(),i=()=>{const e=m.value;e&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())},d=a(1),k=e=>{e.preventDefault(),e.deltaY<0?p():W()},p=()=>{d.value<K&&(d.value+=H)},W=()=>{d.value>J&&(d.value-=H)};return(e,ge)=>O((D(),B("div",{class:"preview-container",onWheel:k},[s("div",{class:"preview-btns"},[s("span",{style:{"font-size":"24px"},onClick:u,class:"iconfont icon-plus-circle-fill"}),s("span",{style:{"font-size":"24px"},onClick:g,class:"iconfont icon-download1"}),s("span",{style:{"font-size":"24px"},onClick:i,class:"iconfont icon-a-ScreenExpand"})]),s("div",{class:"preview-content",onClick:u},[s("img",{src:t(r),alt:t(_),style:Y({transform:`scale(${t(d)})`}),class:"preview-image",ref_key:"previewImageRef",ref:m},null,12,G)])],544)),[[U,t(w)]])}}),Q=L(M,[["__scopeId","data-v-8da864e2"]]),T={class:"preview-container"},ee={class:"preview-content"},se=["src"],oe=$({__name:"VideoViewer",props:{src:{},name:{},visible:{}},emits:["close"],setup(o,{emit:n}){const f=o,{src:r,name:_,visible:w}=A(f),v=n;function u(){v("close")}const g=()=>{console.log("视频暂停")},m=()=>{console.log("视频播放结束")},i=()=>{console.log("视频加载被中止")};return(d,k)=>O((D(),B("div",T,[s("div",{class:"preview-btns"},[s("span",{style:{"font-size":"30px"},onClick:u,class:"iconfont icon-plus-circle-fill"})]),s("div",ee,[s("video",{id:"videoPlayer",controls:"",src:t(r),onPause:g,onEnded:m,onAbort:i}," 你的浏览器不支持视频播放。 ",40,se)])],512)),[[U,t(w)]])}}),ie=L(oe,[["__scopeId","data-v-cda140d1"]]),te={class:"pdf-preview"},ne={class:"pdf-header"},le={class:"title"},ce={class:"page-tool"},ae={class:"page-tool-item"},re={class:"pdf-container"},de=$({__name:"PdfViewer",props:{params:{}},emits:["close"],setup(o,{emit:n}){const f=o,{title:r,url:_,doc:w,pages:v}=A(f.params),u=n;function g(){u("close")}function m(){fetch(w.value).then(p=>p.blob()).then(p=>{X.saveAs(p,r.value)}).catch(p=>console.error("下载图片异常:",p))}const i=a(1);function d(){i.value>1&&(i.value-=1)}function k(){i.value<v.value&&(i.value+=1)}return(p,W)=>(D(),B("div",te,[s("div",ne,[s("p",le,F(t(r)),1),s("div",ce,[s("div",{class:"page-tool-item",onClick:d},"上一页"),s("div",{class:"page-tool-item",onClick:k},"下一页"),s("div",ae,F(i.value)+"/"+F(t(v)),1),s("div",{class:"page-tool-item",onClick:m},"下载"),s("div",{class:"page-tool-item",onClick:g},"关闭")])]),s("div",re,[I(t(j),{class:"paper-pdf",source:t(_),page:i.value},null,8,["source","page"])])]))}}),pe=L(de,[["__scopeId","data-v-20624ec2"]]);let l=null,y=null;const b=a(!1),z=a(),q=a(),ve=(o,n)=>{b.value=!0,z.value=o,q.value=n;debugger;l?(l.props.src=z,l.props.name=q,l.props.visible=b):(l=I(Q,{src:z,name:q,visible:b,onClose:ue}),y=document.createElement("div"),document.body.appendChild(y)),C(l,y)},ue=()=>{l&&(b.value=!1,l.props.visible=b,C(l,y))};let c=null,x=null;const P=a(!1),R=a(),E=a(),me=(o,n)=>{P.value=!0,R.value=o,E.value=n;debugger;c?(c.props.src=R,c.props.name=E,c.props.visible=P):(c=I(ie,{src:R,name:E,visible:P,onClose:fe}),x=document.createElement("div"),document.body.appendChild(x)),C(c,x)},fe=()=>{c&&(P.value=!1,c.props.visible=P,C(c,x))};let N=null,S,V;const h=Z({}),_e=o=>{h.doc=o.doc,h.title=o.title,h.pages=o.pages,h.url=o.url,N||(N=I(pe,{params:h,onClose:we}),S=document.createElement("div"),document.body.appendChild(S)),C(N,S),V=S.querySelector(".pdf-preview"),V&&V.classList.remove("hidden")},we=()=>{V&&V.classList.add("hidden")},Ce={previewImage:ve,previewVideo:me,previewPdf:_e};export{Ce as P};
