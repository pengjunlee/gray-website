import{_ as D,g as le,r as ce,t as xe}from"./index-IyXLYqeE.js";import"./request_website-tWP5tCom.js";import{t as we,_ as Me}from"./Header.vue_vue_type_style_index_0_lang---IOcKrC.js";import{b as H,E as re,c as Re}from"./element-plus-CJC0wB9Y.js";import{f as Te}from"./@vueuse-B8VPWXef.js";import{e as y}from"./mitt-CJohXFwE.js";import{d as T,o as r,c as _,L as b,P as R,u as m,V as z,r as o,Q as I,a as t,S as Ce,$ as Se,I as Le,b as K,at as de,au as me,h as Ie,G as $e,Z as ue,_ as fe,U as A,M as Ee,g as Pe,w as Be,aj as Ae,R as De,av as He}from"./@vue-l7diRTBz.js";import{s as M}from"./screenfull-DmVOzVZz.js";import"./pinia-UVQjpmfQ.js";import"./axios-Cm0UX6qg.js";import"./vue-router-CN4d8vP8.js";import"./vue-pdf-embed-lua1maMu.js";import"./lodash-es-CZlvcgvt.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-Dc0JWrkO.js";import"./@element-plus-C5UfBZZn.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./auth-BUGjDS6_.js";import"./mitt-DJ65BbbF.js";const ze={key:0,class:"iconfont icon-sun"},je={key:1,class:"iconfont icon-moon"},Ne=T({__name:"index",setup(p){let v=Te();const u=()=>{v.value=!v.value,y.emit("dayNightChanged",v.value)};return(i,d)=>{const l=H;return r(),_("div",{style:{"margin-bottom":"1rem"},onClick:u},[b(l,{effect:"light",content:"日夜切换",placement:"left"},{default:R(()=>[m(v)?(r(),_("span",ze)):(r(),_("span",je))]),_:1})])}}}),Xe={key:0,class:"iconfont icon-a-ScreenShrink"},Fe={key:1,class:"iconfont icon-a-ScreenExpand"},Ue=T({__name:"index",setup(p){function v(){M.isEnabled?M.isFullscreen?(re.success("退出网页全屏"),M.exit()):(re.success("进入网页全屏"),M.toggle()):Re.alert("浏览器不支持全屏","提示",{confirmButtonText:"确定",type:"warning"})}return(u,i)=>{const d=H;return m(M).isEnabled?(r(),_("div",{key:0,style:{"margin-bottom":"1rem"},onClick:i[0]||(i[0]=l=>v())},[b(d,{effect:"light",content:"全屏切换",placement:"left"},{default:R(()=>[m(M).isFullscreen?(r(),_("span",Xe)):(r(),_("span",Fe))]),_:1})])):z("",!0)}}}),Ve=D(Ue,[["__scopeId","data-v-267e6f9e"]]),We=T({__name:"index",props:{fontSize:{type:String,default:"3rem"}},setup(p){const v=o(0);window.addEventListener("scroll",we(()=>{v.value=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop||0},100));function u(){window.scrollTo({top:0,behavior:"smooth"})}return(i,d)=>{const l=H;return r(),I(Se,{name:"el-zoom-in-bottom"},{default:R(()=>[m(v)>=800?(r(),_("div",{key:0,style:{"margin-top":"1rem"},onClick:u},[b(l,{effect:"light",content:"回到顶部",placement:"left"},{default:R(()=>[t("span",{style:Ce({fontSize:p.fontSize}),class:"iconfont icon-caps-unlock-filling"},null,4)]),_:1})])):z("",!0)]),_:1})}}}),Ye=p=>(de("data-v-3a2f21cc"),p=p(),me(),p),qe={class:"toolbox_div"},Ge=Ye(()=>t("span",{id:"menu-icon",class:"iconfont icon-menu"},null,-1)),Ke={class:"mb-4"},Oe=T({__name:"index",props:{toTop:{type:Boolean,default:!1}},emits:["ReadingMode"],setup(p,{emit:v}){const u=o(),i=p,{toTop:d}=Le(i),l=o(!1),g=()=>{h(),l.value?(l.value=!1,u.value.classList.add("hide")):(l.value=!0,u.value.classList.remove("hide"))},h=()=>{const s=document.getElementById("menu-icon");s==null||s.classList.add("active"),setTimeout(function(){s==null||s.classList.remove("active")},1e3)};return K(()=>{console.log(d.value)}),(s,C)=>{const x=H;return r(),_("div",qe,[t("div",{ref_key:"moreRef",ref:u,class:"hide"},[b(Ne),b(Ve)],512),t("div",{class:"rotate-box",onClick:g},[b(x,{effect:"light",content:"更多功能",placement:"left"},{default:R(()=>[Ge]),_:1})]),t("div",Ke,[m(d)?(r(),I(We,{key:0})):z("",!0)])])}}}),Qe=D(Oe,[["__scopeId","data-v-3a2f21cc"]]),pe=p=>(de("data-v-1b2033ea"),p=p(),me(),p),Ze={class:"music-player-top"},Je={class:"music-player"},et={class:"top-bar"},tt=pe(()=>t("span",{class:"iconfont icon-24gl-volumeMiddle"},null,-1)),st=["src"],nt={class:"lyric-wrapper"},ot={class:"info-right"},it={class:"music-name"},at={class:"playback-setting"},lt=pe(()=>t("span",{class:"duration-bar play-duration"},null,-1)),ct={class:"music-disc"},rt=["src"],ut={class:"info-box"},ft={class:"info"},dt={class:"text-sm whitespace-nowrap"},mt={class:"text-sm whitespace-nowrap"},pt=T({__name:"index",setup(p,{expose:v}){const u=o(!1),i=o({id:"",name:"",src:"",img:"./favicon.png",artist:"",lyrics:""}),d=o([]),l=o(!1),g=o(),h=o(!1),s=o(),C=o(),x=o(),$=o(),S=o(),j=o(),N=o(),X=o(),F=o(),O=o(),U=o(),ve=o(),V=o(),W=o(!0);Ie(()=>"./favicon.png");let Y,Q,k=0;function _e(){Y&&clearInterval(Y),Q=s.value.duration,Y=setInterval(function(){Z()},1e3)}function Z(){if(l.value&&F.value){F.value.style.width=s.value.currentTime/s.value.duration*100+"%";let e=s.value.duration-s.value.currentTime,n=parseInt(String(e/60)),f=parseInt(String(e%60)),c=`${n<10?"0"+n:n}:${f<10?"0"+f:f}`;O.value.innerHTML=c,J()}}let L=[],E=[];function J(){if(h.value){let e=q(L,Math.floor(s.value.currentTime));e<0&&(e=0),S.value.style.top=e*-21+150+"px",[...S.value.children].forEach(n=>{n.style.color="var(--gw-bg-font)"}),S.value.children[e].style.color="aqua"}}function ee(){let e="";L=[],E=[];let n=i==null?void 0:i.value.lyrics;if(!n)e+="<li>未发现歌词</li>",L=[0];else try{n.split(`
`).forEach(c=>{const a=c.split("::");L.push(a[0]),E.push(a[1]),e+=`<li>${E[E.length-1]}</li>`})}catch{e+="<li>歌词格式不正确</li>",L=[0]}l.value&&(S.value.innerHTML=e)}function P(e){if(k=e,d.value.length>0){let n=d.value[e];i.value=n,s.value.src=n.src,y.emit("musicChanged",i.value),W.value=!0,l.value&&($.value.innerHTML=n.artist,x.value.innerHTML=n.title,h.value&&ee())}}function w(){s.value.play(),u.value=!0}function te(){s.value.pause(),u.value=!1}function se(){k==0?k=d.value.length-1:k--,P(k),w()}function B(){debugger;k==d.value.length-1?k=0:k++,P(k),w()}function q(e,n,f=0,c=e.length-1){if(f>c)return f-1;const a=Math.floor((f+c)/2);return e[a]===n?a:e[a]>n?q(e,n,f,a-1):q(e,n,a+1,c)}function ye(){W.value&&(ee(),W.value=!1),h.value?(j.value.style.display="flex",X.value.style.display="none",N.value.style.width="40%",h.value=!1):(j.value.style.display="block",X.value.style.display="block",N.value.style.width="100%",h.value=!0)}function ge(e){s.value.currentTime=e.offsetX/e.target.offsetWidth*Q,Z()}function he(e){s.value.volume=e.offsetX/e.target.offsetWidth,U.value.style.width=e.offsetX/e.target.offsetWidth*100+"%"}function ke(){let e=V.value.offsetWidth;document.onmousemove=function(n){let c=(n||event).clientX-V.value.getBoundingClientRect().left;c>e?c=e:c==0&&(c=0),U.value.style.width=c/e*100+"%",s.value.volume=c/e},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}const G=o(!1);let ne=0,oe=0;const be=e=>{if(G.value=!0,g.value){let n=g.value.getBoundingClientRect();ne=n.width,oe=n.height}document.addEventListener("mousemove",ie),document.addEventListener("mouseup",ae)},ie=e=>{G.value&&g.value&&(g.value.style.left=e.clientX+ne/2-18+"px",g.value.style.top=e.clientY+oe/2-18.75+"px")},ae=()=>{G.value=!1,document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",ae)};return K(()=>{const e=Pe();e&&(window._MusicPlayer=e.proxy),P(0),y.on("playMusic",()=>{w()}),y.on("previousMusic",()=>{se()}),y.on("nextMusic",()=>{B()}),y.on("setMusic",n=>{P(n)}),y.on("playSelectedMusic",n=>{let f=n.map(a=>({id:a.id,name:a.title,src:le()+a.previewUrl.replace("//","/"),img:a.artistThumbnail?le()+a.artistThumbnail:"./favicon.png",artist:a.artist,lyrics:a.lyrics}));debugger;const c=new Set(f.map(a=>a.id));d.value=d.value.filter(a=>!c.has(a.id)),d.value.unshift(...f)})}),$e(()=>{delete window._MusicPlayer,y.off("playMusic"),y.off("previousMusic"),y.off("nextMusic"),y.off("setMusic"),y.off("playSelectedMusic")}),v({playMusic:w}),(e,n)=>{var f,c;return r(),_(Ee,null,[ue(t("div",{ref_key:"musicPlayerRef",ref:g,class:"music-player-wrapper"},[t("div",Ze,[t("span",{onMousedown:be,class:"iconfont icon-hand"},null,32),t("span",{onClick:n[0]||(n[0]=a=>l.value=!1),class:"iconfont icon--"})]),t("div",Je,[t("div",et,[tt,t("div",{ref_key:"soundProgressBarRef",ref:V,class:"progress-bar sound-progress-bar"},[t("span",{onClick:he,class:"duration-bar sound-duration"}),t("span",{ref_key:"soundProgressRef",ref:U,class:"progress sound-progress"},[t("span",{onMousedown:ke,ref_key:"roundRef",ref:ve,class:"round"},null,544)],512)],512),t("span",{class:"iconfont icon-geciweidianji",onClick:ye})]),t("div",{ref_key:"musicInfoRef",ref:j,class:"music-info"},[t("div",{ref_key:"infoLeftRef",ref:N,class:"info-left"},[t("img",{ref_key:"musicImgRef",ref:C,class:"music-img",alt:"",src:m(i).img,onerror:"this.src='./favicon.png';"},null,8,st),t("div",{ref_key:"lyricMaskRef",ref:X,class:"lyric-mask"},[t("div",nt,[t("ul",{ref_key:"lyricContentRef",ref:S,id:"lyc-content",style:{top:"100px"}},null,512)])],512)],512),t("div",ot,[t("div",it,[t("span",{ref_key:"musicNameRef",ref:x,class:"name"},A(m(i).name||"放首歌听听吧"),513),t("span",{ref_key:"musicAuthorRef",ref:$,class:"musician"},A(m(i).artist||""),513)]),t("div",at,[t("span",{onClick:se,class:"iconfont icon-next previous"}),m(u)?(r(),_("span",{key:0,onClick:te,class:"iconfont icon-zanting1"})):(r(),_("span",{key:1,onClick:w,class:"iconfont icon-bofang"})),t("span",{onClick:B,class:"iconfont icon-next next"})])])],512),t("div",{onClick:ge,class:"progress-bar player-progress-bar"},[lt,t("span",{ref_key:"playerProgressRef",ref:F,class:"progress player-progress"},null,512),t("span",{ref_key:"musicTimeRef",ref:O,class:"time"},"00:00",512)])])],512),[[fe,m(l)]]),ue(t("div",ct,[t("img",{onClick:n[1]||(n[1]=a=>l.value=!m(l)),class:"music-img",src:m(i).img,alt:"musician logo",onerror:"this.src='./favicon.png';"},null,8,rt),t("div",ut,[t("div",ft,[t("div",dt,A(((f=m(i))==null?void 0:f.name)||"放首歌来听吧"),1),t("div",mt,A((c=m(i))==null?void 0:c.artist),1)]),t("span",{onClick:B,style:{"margin-right":"1rem"},class:"iconfont icon-next"}),m(u)?(r(),_("span",{key:0,onClick:te,class:"iconfont icon-zanting1"})):(r(),_("span",{key:1,onClick:w,class:"iconfont icon-bofang"}))])],512),[[fe,!m(l)]]),t("audio",{src:"",ref_key:"audioRef",ref:s,onTimeupdate:J,onCanplay:_e,onEnded:B},null,544)],64)}}}),vt=D(pt,[["__scopeId","data-v-1b2033ea"]]),_t={id:"index-layout",class:"layout-root-container"},yt=T({__name:"Index",setup(p){const v=o([{icon:"icon-wangzhanshouye",name:"Home",title:"首页"},{icon:"icon-Bloggericon",name:"Articles",title:"博文"},{icon:"icon-wangzhantubiao",name:"Links",title:"导航"},{icon:"icon-heji",name:"Resource",title:"资源"},{icon:"icon-dianying",name:"Movie",title:"影院"},{icon:"icon-18erji-2",name:"Music",title:"音乐"}]),u=o("Home"),i=o(["Home"]),d=o("Home");K(async()=>{}),Be(()=>ce.currentRoute.value,s=>{s.name&&(d.value=s.name,u.value=s.name.toString()),s.meta.keepAlive&&i.value.indexOf(s.name)===-1&&i.value.push(s.name)},{immediate:!0});const l=["Login"],g=()=>{const s=ce.currentRoute.value;return!(s!=null&&s.name&&l.find(C=>C===s.name))},h=s=>{u.value=s,xe(s)};return(s,C)=>{const x=Ae("router-view");return r(),_("div",_t,[g()?(r(),I(Me,{key:0,tabs:v.value,selectedTab:u.value,"onUpdate:selectedTab":h},null,8,["tabs","selectedTab"])):z("",!0),b(x,null,{default:R(({Component:$})=>[(r(),I(He,{include:[i.value]},[(r(),I(De($)))],1032,["include"]))]),_:1}),b(Qe,{toTop:!0}),b(vt)])}}}),zt=D(yt,[["__scopeId","data-v-4326138d"]]);export{zt as default};
